
<style>
.comment {
    color: #888;
}
.protodoc {
    border: 1px solid #ddd;
    border-left: 3px solid #e6522c;
    border-radius: 0;
    padding-left: 10px;
}
</style><h3 id="cloudprober_surfacer_LabelFilter">cloudprober.surfacer.LabelFilter <a class="anchor" href="#cloudprober_surfacer_LabelFilter">#</a></h3>
<pre class="protodoc">

key: &lt;string>

value: &lt;string>

</pre><h3 id="cloudprober_surfacer_SurfacerDef">cloudprober.surfacer.SurfacerDef <a class="anchor" href="#cloudprober_surfacer_SurfacerDef">#</a></h3>
<pre class="protodoc">

<div class="comment"># This name is used for logging. If not defined, it&#39;s derived from the type.
# Note that this field is required for the USER_DEFINED surfacer type and
# should match with the name that you used while registering the user defined
# surfacer.</div>name: &lt;string>

type: (NONE|PROMETHEUS|STACKDRIVER|FILE|POSTGRES|PUBSUB|CLOUDWATCH|DATADOG|PROBESTATUS|BIGQUERY|USER_DEFINED): &lt;enum>

<div class="comment"># How many metrics entries (EventMetrics) to buffer. This is the buffer
# between incoming metrics and the metrics that are being processed. Default
# value should work in most cases. You may need to increase it on a busy
# system, but that&#39;s usually a sign that you metrics processing pipeline is
# slow for some reason, e.g. slow writes to a remote file.
# Note: Only file and pubsub surfacer supports this option right now.</div>metrics_buffer_size: &lt;int64> | default: 10000

<div class="comment"># If specified, only allow metrics that match any of these label filters.
# Example:
# allow_metrics_with_label {
#   key: &#34;probe&#34;,
#   value: &#34;check_homepage&#34;,
# }</div>allow_metrics_with_label: &lt;<a href="../surfacer#cloudprober_surfacer_LabelFilter">cloudprober.surfacer.LabelFilter</a>>

<div class="comment"># Ignore metrics that match any of these label filters. Ignore has precedence
# over allow filters.
# Example:
# ignore_metrics_with_label {
#   key: &#34;probe&#34;,
#   value: &#34;sysvars&#34;,
# }</div>ignore_metrics_with_label: &lt;<a href="../surfacer#cloudprober_surfacer_LabelFilter">cloudprober.surfacer.LabelFilter</a>>

<div class="comment"># Allow and ignore metrics based on their names. You can specify regexes
# here. Ignore has precendence over allow.
# Examples:
#  ignore_metrics_with_name: &#34;validation_failure&#34;
#  allow_metrics_with_name: &#34;(total|success|latency)&#34;
#
# For efficiency reasons, filtering by metric name has to be implemented by
# individual surfacers (while going through metrics within an EventMetrics).
# Currently following surfacers implement it:
#     CLOUDWATCH, PROMETHEUS, STACKDRIVER</div>allow_metrics_with_name: &lt;string>

ignore_metrics_with_name: &lt;string>

<div class="comment"># Whether to add failure metric or not. For stackdriver surfacer, we add
# failure metric by default.</div>add_failure_metric: &lt;bool>

<div class="comment"># If set to true, cloudprober will export all metrics as gauge metrics. Note
# that cloudprober inherently generates only cumulative metrics. To create
# gauge metrics from cumulative metrics, we keep a copy of the old metrics
# and subtract new metrics from the previous metrics. This transformation in
# metrics has an increased memory-overhead because extra copies required.
# However, it should not be noticeable unless you&#39;re producing large number
# of metrics (say &gt; 10000 metrics per second).</div>export_as_gauge: &lt;bool>

[prometheus_surfacer &lt;<a href="../surfacer#cloudprober_surfacer_prometheus_SurfacerConf">cloudprober.surfacer.prometheus.SurfacerConf</a>&gt; | stackdriver_surfacer &lt;<a href="../surfacer#cloudprober_surfacer_stackdriver_SurfacerConf">cloudprober.surfacer.stackdriver.SurfacerConf</a>&gt; | 
&nbsp;file_surfacer &lt;<a href="../surfacer#cloudprober_surfacer_file_SurfacerConf">cloudprober.surfacer.file.SurfacerConf</a>&gt; | postgres_surfacer &lt;<a href="../surfacer#cloudprober_surfacer_postgres_SurfacerConf">cloudprober.surfacer.postgres.SurfacerConf</a>&gt; | 
&nbsp;pubsub_surfacer &lt;<a href="../surfacer#cloudprober_surfacer_pubsub_SurfacerConf">cloudprober.surfacer.pubsub.SurfacerConf</a>&gt; | cloudwatch_surfacer &lt;<a href="../surfacer#cloudprober_surfacer_cloudwatch_SurfacerConf">cloudprober.surfacer.cloudwatch.SurfacerConf</a>&gt; | 
&nbsp;datadog_surfacer &lt;<a href="../surfacer#cloudprober_surfacer_datadog_SurfacerConf">cloudprober.surfacer.datadog.SurfacerConf</a>&gt; | probestatus_surfacer &lt;<a href="../surfacer#cloudprober_surfacer_probestatus_SurfacerConf">cloudprober.surfacer.probestatus.SurfacerConf</a>&gt; | 
&nbsp;bigquery_surfacer &lt;<a href="../surfacer#cloudprober_surfacer_bigquery_SurfacerConf">cloudprober.surfacer.bigquery.SurfacerConf</a>&gt;]: &lt;oneof>

</pre><h3 id="cloudprober_surfacer_bigquery_BQColumn">cloudprober.surfacer.bigquery.BQColumn <a class="anchor" href="#cloudprober_surfacer_bigquery_BQColumn">#</a></h3>
<pre class="protodoc">

label: &lt;string>

column_name: &lt;string>

column_type: &lt;string>

</pre><h3 id="cloudprober_surfacer_bigquery_SurfacerConf">cloudprober.surfacer.bigquery.SurfacerConf <a class="anchor" href="#cloudprober_surfacer_bigquery_SurfacerConf">#</a></h3>
<pre class="protodoc">

project_name: &lt;string>

bigquery_dataset: &lt;string>

bigquery_table: &lt;string>

<div class="comment"># It represents the bigquery table columns.
#  bigquery_columns {
#    label: &#34;id&#34;,
#    column_name: &#34;id&#34;,
#    column_type: &#34;string&#34;,
#  }</div>bigquery_columns: &lt;<a href="../surfacer#cloudprober_surfacer_bigquery_BQColumn">cloudprober.surfacer.bigquery.BQColumn</a>>

<div class="comment"># It represents bigquery client timeout in seconds. So, if bigquery insertion
# is not completed within this time period then the request will fail and the
# failed rows will be retried later.</div>bigquery_timeout_sec: &lt;int64> | default: 30

metrics_buffer_size: &lt;int64> | default: 100000

<div class="comment"># This denotes the time interval after which data will be inserted in
# bigquery. Default is 10 seconds. So after every 10 seconds all the em in
# current will be inserted in bigquery in a default batch size of 1000</div>batch_timer_sec: &lt;int64> | default: 10

metrics_batch_size: &lt;int64> | default: 1000

<div class="comment"># Column name for metrics name, value and timestamp</div>metric_time_col_name: &lt;string> | default: metric_time

metric_name_col_name: &lt;string> | default: metric_name

metric_value_col_name: &lt;string> | default: metric_value

</pre><h3 id="cloudprober_surfacer_cloudwatch_SurfacerConf">cloudprober.surfacer.cloudwatch.SurfacerConf <a class="anchor" href="#cloudprober_surfacer_cloudwatch_SurfacerConf">#</a></h3>
<pre class="protodoc">

<div class="comment"># The cloudwatch metric namespace</div>namespace: &lt;string> | default: cloudprober

<div class="comment"># The cloudwatch resolution value, lowering this below 60 will incur
# additional charges as the metrics will be charged at a high resolution
# rate.</div>resolution: &lt;int32> | default: 60

<div class="comment"># The AWS Region, used to create a CloudWatch session.
# The order of fallback for evaluating the AWS Region:
# 1. This config value.
# 2. EC2 metadata endpoint, via cloudprober sysvars.
# 3. AWS_REGION environment value.
# 4. AWS_DEFAULT_REGION environment value, if AWS_SDK_LOAD_CONFIG is set.
# https://aws.github.io/aws-sdk-go-v2/docs/configuring-sdk/</div>region: &lt;string>

<div class="comment"># The maximum number of metrics that will be published at one
# time. Metrics will be stored locally in a cache until this 
# limit is reached. 1000 is the maximum number of metrics
# supported by the Cloudwatch PutMetricData API.
# Metrics will be published when the timer expires, or the buffer is
# full, whichever happens first.</div>metrics_batch_size: &lt;int32> | default: 1000

<div class="comment"># The maximum amount of time to hold metrics in the buffer (above).
# Metrics will be published when the timer expires, or the buffer is
# full, whichever happens first. </div>batch_timer_sec: &lt;int32> | default: 30

</pre><h3 id="cloudprober_surfacer_datadog_SurfacerConf">cloudprober.surfacer.datadog.SurfacerConf <a class="anchor" href="#cloudprober_surfacer_datadog_SurfacerConf">#</a></h3>
<pre class="protodoc">

<div class="comment"># Prefix to add to all metrics.</div>prefix: &lt;string> | default: cloudprober

<div class="comment"># Datadog API key. If not set, DD_API_KEY env variable is used.</div>api_key: &lt;string>

<div class="comment"># Datadog APP key. If not set, DD_APP_KEY env variable is used.</div>app_key: &lt;string>

<div class="comment"># Datadog server, default: &#34;api.datadoghq.com&#34;</div>server: &lt;string>

<div class="comment"># The maximum number of metrics that will be published at one
# time. Metrics will be stored locally in a cache until this 
# limit is reached. Datadog&#39;s SubmitMetric API has a maximum payload 
# size of 500 kilobytes (512000 bytes). Compressed payloads must have a 
# decompressed size of less than 5 megabytes (5242880 bytes).
# Metrics will be published when the timer expires, or the buffer is
# full, whichever happens first.</div>metrics_batch_size: &lt;int32> | default: 1000

<div class="comment"># The maximum amount of time to hold metrics in the buffer (above).
# Metrics will be published when the timer expires, or the buffer is
# full, whichever happens first. </div>batch_timer_sec: &lt;int32> | default: 30

<div class="comment"># Disable gzip compression of metric payload, when sending metrics to Datadog.
# Compression is enabled by default.</div>disable_compression: &lt;bool>

</pre><h3 id="cloudprober_surfacer_file_SurfacerConf">cloudprober.surfacer.file.SurfacerConf <a class="anchor" href="#cloudprober_surfacer_file_SurfacerConf">#</a></h3>
<pre class="protodoc">

<div class="comment"># Where to write the results. If left unset, file surfacer writes to the
# standard output.</div>file_path: &lt;string>

prefix: &lt;string> | default: cloudprober

<div class="comment"># Compress data before writing to the file.</div>compression_enabled: &lt;bool> | default: false

</pre><h3 id="cloudprober_surfacer_postgres_LabelToColumn">cloudprober.surfacer.postgres.LabelToColumn <a class="anchor" href="#cloudprober_surfacer_postgres_LabelToColumn">#</a></h3>
<pre class="protodoc">

<div class="comment"># Label name</div>label: &lt;string>

<div class="comment"># Column to map this label to:</div>column: &lt;string>

</pre><h3 id="cloudprober_surfacer_postgres_SurfacerConf">cloudprober.surfacer.postgres.SurfacerConf <a class="anchor" href="#cloudprober_surfacer_postgres_SurfacerConf">#</a></h3>
<pre class="protodoc">

<div class="comment"># Postgres connection string.
# Example:
#  &#34;postgresql://root:${PASSWORD}@localhost/cloudprober?sslmode=disable&#34;</div>connection_string: &lt;string>

<div class="comment"># Metrics table name.
# To create table (when storing all labels in single column in JSON format):
# CREATE TABLE metrics (
#   time timestamp, metric_name varchar(80), value float8, labels jsonb
# )</div>metrics_table_name: &lt;string>

<div class="comment"># Adding label_to_column fields changes how labels are stored in a Postgres
# table. If this field is not specified at all, all the labels are stored as
# jsonb values as the &#39;labels&#39; column (this mode impacts performance
# negatively). If label_to_colum entries are specified for some labels,
# those labels are stored in their dedicated columns; all the labels that
# don&#39;t have a mapping will be dropped.</div>label_to_column: &lt;<a href="../surfacer#cloudprober_surfacer_postgres_LabelToColumn">cloudprober.surfacer.postgres.LabelToColumn</a>>

metrics_buffer_size: &lt;int64> | default: 10000

</pre><h3 id="cloudprober_surfacer_probestatus_SurfacerConf">cloudprober.surfacer.probestatus.SurfacerConf <a class="anchor" href="#cloudprober_surfacer_probestatus_SurfacerConf">#</a></h3>
<pre class="protodoc">

<div class="comment"># default 60s</div>resolution_sec: &lt;int32> | default: 60

<div class="comment"># Number of points in each timeseries. This field dictates how far back
# can you go up to (resolution_sec * timeseries_size). Note that higher
# this number, more memory you&#39;ll use.</div>timeseries_size: &lt;int32> | default: 4320

<div class="comment"># Max targets per probe.</div>max_targets_per_probe: &lt;int32> | default: 20

<div class="comment"># ProbeStatus URL
# Note that older default URL /probestatus forwards to this URL to avoid
# breaking older default setups.</div>url: &lt;string> | default: /status

<div class="comment"># Page cache time</div>cache_time_sec: &lt;int32> | default: 2

<div class="comment"># Probestatus surfacer is enabled by default. To disable it, set this
# option.</div>disable: &lt;bool>

</pre><h3 id="cloudprober_surfacer_prometheus_SurfacerConf">cloudprober.surfacer.prometheus.SurfacerConf <a class="anchor" href="#cloudprober_surfacer_prometheus_SurfacerConf">#</a></h3>
<pre class="protodoc">

<div class="comment"># How many metrics entries (EventMetrics) to buffer. Incoming metrics
# processing is paused while serving data to prometheus. This buffer is to
# make writes to prometheus surfacer non-blocking.
# NOTE: This field is confusing for users and will be removed from the config
# after v0.10.3.</div>metrics_buffer_size: &lt;int64> | default: 10000

<div class="comment"># Whether to include timestamps in metrics. If enabled (default) each metric
# string includes the metric timestamp as recorded in the EventMetric.
# Prometheus associates the scraped values with this timestamp. If disabled,
# i.e. timestamps are not exported, prometheus associates scraped values with
# scrape timestamp.</div>include_timestamp: &lt;bool> | default: true

<div class="comment"># URL that prometheus scrapes metrics from.</div>metrics_url: &lt;string> | default: /metrics

<div class="comment"># Prefix to add to all metric names. For example setting this field to
# &#34;cloudprober_&#34; will result in metrics with names:
# cloudprober_total, cloudprober_success, cloudprober_latency, ..</div>metrics_prefix: &lt;string>

</pre><h3 id="cloudprober_surfacer_pubsub_SurfacerConf">cloudprober.surfacer.pubsub.SurfacerConf <a class="anchor" href="#cloudprober_surfacer_pubsub_SurfacerConf">#</a></h3>
<pre class="protodoc">

<div class="comment"># GCP project name for pubsub. If not specified and running on GCP,
# project is used.</div>project: &lt;string>

<div class="comment"># Pubsub topic name.
# Default is cloudprober-{hostname}</div>topic_name: &lt;string>

<div class="comment"># Compress data before writing to pubsub.</div>compression_enabled: &lt;bool> | default: false

</pre><h3 id="cloudprober_surfacer_stackdriver_SurfacerConf">cloudprober.surfacer.stackdriver.SurfacerConf <a class="anchor" href="#cloudprober_surfacer_stackdriver_SurfacerConf">#</a></h3>
<pre class="protodoc">

<div class="comment"># GCP project name for stackdriver. If not specified and running on GCP,
# project is used.</div>project: &lt;string>

<div class="comment"># How often to export metrics to stackdriver.</div>batch_timer_sec: &lt;uint64> | default: 10

<div class="comment"># If allowed_metrics_regex is specified, only metrics matching the given
# regular expression will be exported to stackdriver. Since probe type and
# probe name are part of the metric name, you can use this field to restrict
# stackdriver metrics to a particular probe.
# Example:
# allowed_metrics_regex: &#34;.*(http|ping).*(success|validation_failure).*&#34;
#
# Deprecated: Please use the common surfacer options to filter metrics:
# https://cloudprober.org/docs/surfacers/overview/#filtering-metrics</div>allowed_metrics_regex: &lt;string>

<div class="comment"># Monitoring URL base. Full metric URL looks like the following:
# &lt;monitoring_url&gt;/&lt;ptype&gt;/&lt;probe&gt;/&lt;metric&gt;
# Example:
# custom.googleapis.com/cloudprober/http/google-homepage/latency</div>monitoring_url: &lt;string> | default: custom.googleapis.com/cloudprober/

<div class="comment"># How many metrics entries to buffer. Incoming metrics
# processing is paused while serving data to Stackdriver. This buffer is to
# make writes to Stackdriver surfacer non-blocking.</div>metrics_buffer_size: &lt;int64> | default: 10000

metrics_prefix: (NONE|PROBE|PTYPE_PROBE): &lt;enum>

</pre>